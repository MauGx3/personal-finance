{% extends "base.html" %}

{% block content %}
  <h1>{{ asset.name }} ({{ asset.symbol }})</h1>
  <dl class="row">
    <dt class="col-sm-3">Symbol</dt>
    <dd class="col-sm-9">{{ asset.symbol }}</dd>

    <dt class="col-sm-3">Name</dt>
    <dd class="col-sm-9">{{ asset.name }}</dd>

    <dt class="col-sm-3">Type</dt>
    <dd class="col-sm-9">{{ asset.asset_type }}</dd>

    <dt class="col-sm-3">Currency</dt>
    <dd class="col-sm-9">{{ asset.currency }}</dd>

    <dt class="col-sm-3">Exchange</dt>
    <dd class="col-sm-9">{{ asset.exchange }}</dd>

    <dt class="col-sm-3">ISIN</dt>
    <dd class="col-sm-9">{{ asset.isin }}</dd>

    <dt class="col-sm-3">CUSIP</dt>
    <dd class="col-sm-9">{{ asset.cusip }}</dd>

    <dt class="col-sm-3">Active</dt>
    <dd class="col-sm-9">{% if asset.is_active %}Yes{% else %}No{% endif %}</dd>
  </dl>

  <h3>Holdings of this Asset</h3>
  {% if asset.holdings.all %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>User</th>
          <th>Portfolio</th>
          <th>Quantity</th>
          <th>Average Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for holding in asset.holdings.all %}
          <tr>
            <td>{{ holding.user }}</td>
            <td>{{ holding.portfolio|default:"None" }}</td>
            <td>{{ holding.quantity }}</td>
            <td>{{ holding.average_price|default:"N/A" }}</td>
            <td>
              <a class="btn btn-sm btn-info" href="{% url 'assets:holding_detail' holding.pk %}">View</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No holdings for this asset yet.</p>
  {% endif %}

  <p>
    <a class="btn btn-secondary" href="{% url 'assets:asset_edit' asset.pk %}">Edit</a>
    <a class="btn btn-danger" href="{% url 'assets:asset_delete' asset.pk %}">Delete</a>
    <a class="btn btn-link" href="{% url 'assets:list' %}">Back to list</a>
  </p>
{% endblock %}
