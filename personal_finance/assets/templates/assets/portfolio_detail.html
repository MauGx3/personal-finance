{% extends "base.html" %}

{% block content %}
  <h1>{{ portfolio.name }}</h1>
  <dl class="row">
    <dt class="col-sm-3">Name</dt>
    <dd class="col-sm-9">{{ portfolio.name }}</dd>

    <dt class="col-sm-3">Description</dt>
    <dd class="col-sm-9">{{ portfolio.description|default:"No description provided" }}</dd>

    <dt class="col-sm-3">Default Portfolio</dt>
    <dd class="col-sm-9">{% if portfolio.is_default %}Yes{% else %}No{% endif %}</dd>

    <dt class="col-sm-3">Created</dt>
    <dd class="col-sm-9">{{ portfolio.created_at }}</dd>

    <dt class="col-sm-3">Last Updated</dt>
    <dd class="col-sm-9">{{ portfolio.updated_at }}</dd>
  </dl>

  <h3>Holdings in this Portfolio</h3>
  {% if portfolio.holdings.all %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Asset</th>
          <th>Quantity</th>
          <th>Average Price</th>
          <th>Currency</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for holding in portfolio.holdings.all %}
          <tr>
            <td>{{ holding.asset }}</td>
            <td>{{ holding.quantity }}</td>
            <td>{{ holding.average_price|default:"N/A" }}</td>
            <td>{{ holding.currency|default:"N/A" }}</td>
            <td>
              <a class="btn btn-sm btn-info" href="{% url 'assets:holding_detail' holding.pk %}">View</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No holdings in this portfolio yet.</p>
  {% endif %}

  <p>
    <a class="btn btn-secondary" href="{% url 'assets:portfolio_edit' portfolio.pk %}">Edit</a>
    <a class="btn btn-danger" href="{% url 'assets:portfolio_delete' portfolio.pk %}">Delete</a>
    <a class="btn btn-link" href="{% url 'assets:portfolio_list' %}">Back to list</a>
  </p>
{% endblock %}